var qApiSrc = {
    lower: "http://3gimg.qq.com/html5/js/qb.js",
    higher: "http://jsapi.qq.com/get?api=app.share"
},
bLevel = {
    qq: {
        forbid: 0,
        lower: 1,
        higher: 2
    },
    uc: {
        forbid: 0,
        allow: 1
    }
},
UA = navigator.appVersion,
isqqBrowser = (UA.split("MQQBrowser/").length > 1) ? bLevel.qq.higher: bLevel.qq.forbid,
isucBrowser = (UA.split("UCBrowser/").length > 1) ? bLevel.uc.allow: bLevel.uc.forbid,
version = {
    uc: "",
    qq: ""
},
platform_os,
shareBasePath = "http://mjs.sinaimg.cn/wap/module/share/201506051057/",
localhref = window.location.href,
cur_domain = localhref.split("//")[1].split("/")[0].split(".")[0],
isWeixin = false,
__colleid = __colleid || __docConfig.__colleid,
__collekey = __collekey || __docConfig.__collekey;
window.ishare = true;
if (typeof(__docConfig) == "undefined" || !window.__docConfig) {
    window.__docConfig = {
        __domain: cur_domain,
        __docId: "",
        __docUrl: localhref.split("?")[0],
        __cmntId: "",
        __cmntTotal: 0,
        __isGetUserInfo: "",
        __surveyId: "",
        __flvId: "",
        __mainPic: "",
        __cmntListUrl: "",
        __gspsId: "",
        __tj_ch: "news"
    }
}
if (typeof(__userConfig__) == "undefined" || !window.__userConfig__) {
    window.__userConfig__ = {
        __uid: "",
        __unick: "",
        __uface: "",
        __isLogin: false
    }
}
if (typeof(readConfig) == "undefined" || !window.readConfig) {
    window.readConfig = {
        isArt: true,
        share: {
            sharenum: 0,
            hotnum: 10000,
            imgid: "j_ishare_pic",
            shorttitle: "",
            content: "",
            targeturl: "http://o.share.sina.cn/ajshare?vt=4",
            shareurl: localhref,
            isdoc: 1
        },
        originpic: ""
    }
}
cur_domain = __docConfig.__domain || cur_domain;
function MyShareClass() {
    var Z = {
        login: 0,
        platlist: 1,
        share: 2,
        fade: 3
    },
    J = {
        sweibo: ["SinaWeibo", "新浪微博"],
        friend: ["WechatFriends", "微信好友"],
        fsircle: ["WechatTimeline", "微信朋友圈"]
    },
    G = {
        voteNum: 0,
        voteStatus: false,
        favorStatus: false
    },
    t = {
        isInit: false,
        isAdd: true
    },
    O = {
        contentRows: [4, 6],
        contentMax: 88,
        basePath: shareBasePath,
        cssPath: shareBasePath + "css/addShare.min.css",
        userInfoUrl: "http://interface.sina.cn/wap_api/wap_get_user_info.d.api?jsoncallback=",
        animate: ["platformShow", "sinaShow"],
        headimgsrc: "images/headimg.png",
        shareimgsrc: "http://u1.sinaimg.cn/upload/2014/12/08/101778.png"
    },
    N = {
        iTitle: "",
        iContent: "",
        iImgsrc: "",
        iUrl: "",
        iBackurl: "",
        isdoc: 0
    },
    w = {
        findClass: {
            shareIcon: "j_splat_ico",
            shareContentZone: "j_icontent",
            shareBtn: "j_shareBtn",
            platforms_big: "j_platforms_big",
            sinaShareContent: "j_sinaShareContent",
            praiseBtn: "j_vote_btn",
            submitBtn: "j_isunbmit",
            addFavor: "j_iadd_btn",
            sinaInfo: "sinaInfo",
            forbid: "forbid",
            opPraise: "op_praise "
        },
        findId: {
            sharefloat: "j_sharebox",
            floatCross: "j_sharecross",
            shareContentid: "j_ishare_content",
            sharetitle: "j_shareTitle",
            sharecnum: "j_ishare_num",
            spicid: "j_ishare_pic",
            userInfo: "j_sinaInfo",
            userName: "j_user_name",
            userImg: "j_user_img",
            shareImg: "j_ishare_img",
            insertDom: ["j_com_pics_op", "j_com_art_op"]
        }
    },
    ab = {
        iweibo: "kSinaWeibo",
        ifriend: "kWeixin",
        ifcircle: "kWeixinFriend",
        asweibo: "SinaWeibo",
        afriend: "WechatFriends",
        afcircle: "WechatTimeline"
    },
    g,
    j = this,
    a = (typeof(WapLogin) == "function") ? (new WapLogin()) : this;
    personal_url = "http://my.sina.cn/?vt=4",
    _fromPlat = {
        qqfriend: "qqfriend",
        qqweichat: "qqweichat",
        ucfriend: "ucfriend",
        ucweichat: "ucweichat"
    },
    _frompre = readConfig.share.shareurl.indexOf("?") >= 0 ? "&": "?",
    _shareDocUrl = __docConfig.__docUrl ? __docConfig.__docUrl: localhref;
    function k(af, ai, ag, ac, ad) {
        if (isucBrowser) {
            var ae = {
                getTop: function(al) {
                    var am = al.offsetTop;
                    if (al.offsetParent != null) {
                        am += ae.getTop(al.offsetParent)
                    }
                    return am
                },
                getLeft: function(al) {
                    var am = al.offsetLeft;
                    if (al.offsetParent != null) {
                        am += ae.getLeft(al.offsetParent)
                    }
                    return am
                },
                getCss3offsetTop: function(an) {
                    var al = getComputedStyle(an, null).webkitTransform;
                    if (al == "none") {
                        var am = 0
                    } else {
                        var am = parseInt(al.split(",")[5].replace(")", ""))
                    }
                    if (an.parentNode.tagName != "BODY") {
                        am += ae.getCss3offsetTop(an.parentNode)
                    }
                    return am
                },
                getCss3offsetLeft: function(an) {
                    var am = getComputedStyle(an, null).webkitTransform;
                    if (am == "none") {
                        var al = 0
                    } else {
                        var al = parseInt(am.split(",")[4])
                    }
                    if (an.parentNode.tagName != "BODY") {
                        al += ae.getCss3offsetLeft(an.parentNode)
                    }
                    return al
                },
                getNodeInfoById: function(am) {
                    var al = document.getElementById(am);
                    if (al) {
                        var an = [ae.getLeft(al) + ae.getCss3offsetLeft(al), ae.getTop(al) + ae.getCss3offsetTop(al), al.offsetWidth, al.offsetHeight];
                        return (an)
                    } else {
                        return ""
                    }
                }
            };
            if (typeof(ucweb) != "undefined") {
                var aj = ucweb.startRequest("shell.page_share", [ai, ag, ac, ad, "", "我们正在看【" + ai + "】，一起来看吧", ae.getNodeInfoById(af)])
            } else {
                if (typeof(ucbrowser) != "undefined") {
                    if (ad == J.sweibo[0]) {
                        ad = ab.iweibo
                    } else {
                        if (ad == J.friend[0]) {
                            ad = ab.ifriend;
                            ac += _frompre + "from=" + _fromPlat.ucfriend
                        } else {
                            if (ad == J.fsircle[0]) {
                                ad = ab.ifcircle;
                                ac += _frompre + "from=" + _fromPlat.ucweichat
                            }
                        }
                    }
                    ucbrowser.web_share(ai, ag, ac, ad, "", "@手机新浪网", af)
                } else {}
            }
        } else {
            if (isqqBrowser && !isWeixin) {
                if (ad == J.friend[0]) {
                    ad = 1;
                    ac += _frompre + "from=" + _fromPlat.qqfriend
                } else {
                    if (ad == J.fsircle[0]) {
                        ad = 8;
                        ac += _frompre + "from=" + _fromPlat.qqweichat
                    } else {
                        ad = ""
                    }
                }
                var ah = {
                    url: ac,
                    title: ai,
                    description: ag,
                    img_url: N.iImgsrc,
                    img_title: ai,
                    to_app: ad,
                    cus_txt: "请输入此时此刻想要分享的内容"
                },
                ak = -1;
                if (typeof(browser) != "undefined") {
                    if (typeof(browser.app) != "undefined" && isqqBrowser == bLevel.qq.higher) {
                        ak = browser.app.share(ah)
                    }
                } else {
                    if (typeof(window.qb) != "undefined" && isqqBrowser == bLevel.qq.lower) {
                        window.qb.share(ah)
                    } else {}
                }
            } else {}
        }
        n(Z.fade);
        return
    }
    this.login = function(ac, ag, ad, ae) {
        var af = arguments.length;
        if (window.SINA_OUTLOGIN_LAYER && !ac) {
            g = window.SINA_OUTLOGIN_LAYER;
            g.set("sso", {
                entry: "wapsso"
            }).init();
            g.show();
            g.register("login_success",
            function(ah) {
                j.updateUserInfo(ah);
                switch (af) {
                case 2:
                    ag();
                    break;
                case 3:
                    ag(ad);
                    break;
                case 4:
                    ag(ad, ae);
                    break;
                default:
                    window.location.href = window.location.href;
                    break
                }
            });
            g.register("layer_hide",
            function() {
                if (typeof(ag) != "undefined") {
                    ag = null
                }
            })
        }
        return
    };
    this.updateUserInfo = function(ac) {
        if (typeof(ac) != "undefined" && typeof(ac.nick) != "undefined") {
            if (typeof(__userConfig__) == "undefined" || !window.__userConfig__) {
                window.__userConfig__ = {}
            }
            __userConfig__.__isLogin = true;
            __userConfig__.__unick = ac.nick;
            __userConfig__.__uface = ac.portrait;
            __userConfig__.__uid = ac.uid;
            if (!window.globalConfig || typeof(globalConfig) != "undefined") {
                globalConfig = {}
            }
            globalConfig.isLogin = true;
            if ($("#loginImg").find("img").length > 0) {
                $("#loginImg").find("img").attr("src", portrait)
            }
            return
        }
    };
    function P() {
        var ac = readConfig.share.targeturl,
        ad = "",
        ak = __docConfig.__tj_ch ? __docConfig.__tj_ch: "news";
        if ( !! ac == false) {
            return false
        }
        function ai(an) {
            if (an.indexOf("?") == -1) {
                an = an + "?"
            }
            return an
        }
        ac = ai(ac);
        var am = parseInt(new Date().getTime() / 1000),
        ae = am + "85e47ac07ac9d6416" + __userConfig__.__uid,
        aj = hex_md5(ae),
        al = encodeURIComponent(N.iTitle),
        ah = encodeURIComponent(N.iContent),
        af = encodeURIComponent(N.iImgsrc),
        ag = encodeURIComponent(ai(N.iUrl) + "&wm=3049_all&from=qudao");
        ad = ac + "&csrftime=" + am + "&csrfcode=" + aj + "&title=" + al + "&content=" + ah + "&pic=" + af + "&url=" + ag + "&isdoc=" + N.isdoc + "&jsoncallback=shareCallback&tj_ch=" + ak;
        s(ad);
        n(Z.fade);
        return
    }
    window.shareCallback = function(ad) {
        var ac = "";
        switch (ad.code) {
        case - 3 : ac = "分享失败!";
            break;
        case - 2 : ac = "未登录!";
            break;
        case - 1 : ac = "请求非法！";
            break;
        case 1:
            ac = "分享成功！";
            break;
        default:
            ac = "未知状态码 " + ad.code;
            break
        }
        aa(ac, true);
        y("public_sinashare_success")
    };
    var F = null;
    function u() {
        var ac = [];
        if ($(".re_box").length < 1) {
            ac.push("<section>");
            ac.push('<div class="re_box">');
            ac.push('<div class="resault_f re_simple">收藏失败!</div>');
            ac.push('<div class="resault_f re_notice">');
            ac.push("<div>");
            ac.push("<p>您已收藏，请到个人中心查看</p>");
            ac.push("</div>");
            ac.push('<span class="re_cancel">知道了</span>');
            ac.push('<span class="re_ok" data-url="' + personal_url + '">去看看</span>');
            ac.push("</div>");
            ac.push("</div>");
            ac.push("</section>");
            $("body").append(ac.join(""));
            v()
        }
        return
    }
    function aa(ad, ac) {
        if ($(".re_box").length <= 0) {
            u()
        }
        if (F) {
            clearTimeout(F)
        }
        if ($(".resault_f").eq(0).hasClass("showFadeAnimate")) {
            $(".resault_f").eq(0).html("").hide().removeClass("showFadeAnimate")
        }
        if ($(".resault_f").eq(1).hasClass("showAnimate")) {
            $(".resault_f").eq(1).find("p").html("");
            $(".resault_f").eq(1).hide().removeClass("showAnimate")
        }
        if (typeof(ac) == "undefined") {
            return
        } else {
            if (ac) {
                $(".resault_f").eq(0).show().html(ad).addClass("showFadeAnimate");
                F = setTimeout(function() {
                    $(".resault_f").eq(0).html("").hide().removeClass("showFadeAnimate")
                },
                5000)
            } else {
                if (!ac) {
                    $(".resault_f").eq(1).show().addClass("showAnimate").find("p").html(ad)
                }
            }
        }
    }
    function v() {
        $(".re_cancel").each(function() {
            $(this).on("click",
            function() {
                aa()
            })
        });
        $(".re_ok").each(function() {
            $(this).on("click",
            function() {
                aa();
                window.location.href = $(this).data("url")
            })
        })
    }
    function e() {
        var ac = [],
        ae = 1,
        ag = [],
        af = [];
        var ad = __docConfig.__cmntTotal || 0;
        ag.push(__docConfig.__cmntListUrl ? __docConfig.__cmntListUrl: "javascript:void(0)");
        ag.push(ad > 10000 ? (parseInt(ad / 10000) + "万") : ad);
        af.push(readConfig.originpic ? readConfig.originpic: "javascript:void(0)");
        if (readConfig.isArt) {
            ae = 1;
            if (isqqBrowser || isucBrowser) {
                ac.push('<div class="platforms_small">');
                ac.push("<ul>");
                ac.push('<li class="shareText"> 分享</li>');
                ac.push("<li>");
                ac.push("<ul>");
                ac.push("<li></li>");
                ac.push('<li><span class="' + w.findClass.shareIcon + ' splat_ico sina_samll" data-platform="' + J.sweibo[0] + '"  data-sudaclick="public_sinaweibo"></span></li>');
                ac.push('<li><span class="' + w.findClass.shareIcon + ' splat_ico friend_small" data-platform="' + J.friend[0] + '"  data-sudaclick="public_wechatfriends"></span></li>');
                ac.push('<li><span class="' + w.findClass.shareIcon + ' splat_ico fcircle_small" data-platform="' + J.fsircle[0] + '" data-sudaclick="public_wechattimeline"></span></li>');
                ac.push("<li></li>");
                ac.push("</ul>");
                ac.push("</li>");
                ac.push("</ul>");
                ac.push("</div>");
                ac.push('<div class="share_op">');
                ac.push("<ul>")
            } else {
                ac.push('<div class="share_op">');
                ac.push("<ul>");
                ac.push('<li><span class="share_ico art_share ' + w.findClass.shareBtn + '" data-sudaclick="public_new_share">分享</span></li>')
            }
            ac.push('<li><a href="' + ag[0] + '" class="share_ico art_comment" data-sudaclick="public_comment">' + ag[1] + "</a></li>");
            ac.push('<li><a class="share_ico op_praise art_praise" data-sudaclick="public_praise">赞</a></li>');
            ac.push('<li class="favor"><a class="share_ico art_collect ' + w.findClass.addFavor + '" href="javascript:void(0);"  data-sudaclick="public_favor">收藏</a></li>');
            ac.push("</ul>");
            ac.push("</div>")
        } else {
            ae = 0;
            ac.push("<ul >");
            ac.push('<li><a id="weibo_share" href="javascript:void(0);" class="share_ico pic_share ' + w.findClass.shareBtn + '" data-sudaclick="picShare">分享</a></li>');
            ac.push('<li><a id="comment" href="' + ag[0] + '" class="share_ico pic_comment " data-sudaclick="public_comment">' + ag[1] + "</a></li>");
            ac.push('<li><a id="updown" href="javascript:void(0);" class="share_ico op_praise pic_praise" data-sudaclick="public_praise">赞</a></li>');
            ac.push('<li><a id="down" href="' + af[0] + '" class="share_ico pic_original" target="_blank" data-sudaclick="public_origin">原图</a></li>');
            ac.push("</ul>")
        }
        setTimeout(function() {
            $("#" + w.findId.insertDom[ae]).append(ac.join(""))
        },
        2000);
        return
    }
    function s(ad) {
        var ae = document.getElementsByTagName("head")[0],
        ac = document.createElement("script");
        ac.src = ad;
        ac.charset = "utf-8";
        ae.appendChild(ac)
    }
    function V() {
        if (typeof __pkeys != "undefined" && typeof __pValue != "undefined") {
            var ae = "http://data.api.sina.cn/api/count/count.php?act=",
            af = __docConfig.__docUrl || localhref.split("?")[0] || "",
            ah = "&backurl=" + af + "&tj_ch=" + cur_domain + "&ch=&type=1&pkey=" + __pkeys + "&p=" + __pValue + "&channel=" + cur_domain + "&jsonpcallback=",
            ad = ae + "show" + ah + "getPraise",
            ac = ae + "add&tj_type=praise" + ah + "addPraise",
            ag = $("." + w.findClass.opPraise);
            if (ag.length > 0) {
                ag.data("url", ad).data("status", 0);
                s(ad)
            }
            ag.each(function() {
                $(this).on("click tap",
                function() {
                    aa();
                    var ai = $(this);
                    if (ai.hasClass("on") || ai.data("loading") == "yes") {
                        return
                    } else {
                        $(this).data("url", ac).data("status", 1);
                        s(ac)
                    }
                })
            })
        }
    }
    window.getPraise = function(ad) {
        var ac = ad.count > 0 ? (ad.count > 10000 ? (parseInt(ad.count / 10000) + "万") : ad.count) : "赞";
        $("." + w.findClass.opPraise).html(ac).data("loading", "no");
        G.voteNum = ad.count
    };
    window.addPraise = function(ac) {
        if (ac.status == 0) {
            $("." + w.findClass.opPraise).each(function() {
                if ($("." + w.findClass.opPraise).data("loading") == "no") {
                    var ad = ac.count > 0 ? (ac.count > 10000 ? (parseInt(ac.count / 10000) + "万") : ac.count) : "赞";
                    $("." + w.findClass.opPraise).text(ad).addClass("on");
                    G.voteNum = ac.count
                }
            })
        } else {}
    };
    function T() {
        E($("." + w.findClass.addFavor).eq(0), t.isInit);
        $("body").on("click tap",
        function() {});
        document.addEventListener("click",
        function(ac) {
            var ad = X().target;
            if ($(ad).hasClass(w.findClass.addFavor)) {
                aa();
                E($(ad), t.isAdd)
            }
        },
        false)
    }
    function E(ai, ac) {
        if (typeof __colleid != "undefined" && typeof __collekey != "undefined") {
            var af = __userConfig__.__uid || "",
            ad = __docConfig.__gspsId || "",
            ah = __docConfig.__docUrl || localhref.split("?")[0] || "",
            aj = "",
            ac = (typeof(ac) != "undefined") ? (ac ? t.isAdd: t.isInit) : t.isAdd;
            if (__userConfig__.__isLogin) {
                if (ai.hasClass("on")) {
                    if (ac && t.isAdd) {
                        var ag = "您已收藏，请到个人中心查看";
                        aa(ag, false)
                    }
                    return
                }
                if (!ac && !t.isInit) {
                    aj = "&op=isFav&jsoncallback=initFavorCallback"
                } else {
                    aj = "&tj_type=favor&jsoncallback=addFavorCallback"
                }
                var ae = "http://o.my.sina.cn/favorite?uid=" + af + "&docid=" + ad + "&backurl=" + ah + "&tj_ch=" + cur_domain + "&ch=&csrftime=" + __colleid + "&csrfcode=" + __collekey + "&channel=" + cur_domain + aj;
                s(ae)
            } else {
                if (ac && t.isAdd) {
                    n(Z.login, E, ai, true)
                }
            }
        }
    }
    window.addFavorCallback = function(ad) {
        var ae = $("." + w.findClass.addFavor).eq(0);
        ae.data("loading", "no");
        if (ad && ad.code == 1) {
            ae.addClass("on");
            ae.addClass("on").html("已收藏");
            var ac = "您已收藏，请到个人中心查看";
            aa(ac, false)
        } else {
            if (ad && ad.code == 2) {
                document.location.href = ad.data
            } else {
                var ac = "收藏失败!";
                aa(ac, true)
            }
        }
    };
    window.initFavorCallback = function(ac) {
        var ad = $("." + w.findClass.addFavor).eq(0);
        if (ac && ac.code == 1 && ac.data.id) {
            ad.addClass("on").html("已收藏")
        }
    };
    function K() {
        var ac = [],
        ad = [],
        ae = [];
        ae.push((O.contentMax - readConfig.share.content.length < 0) ? "notice": "");
        ae.push(O.contentMax - readConfig.share.content.length);
        if (typeof(__userConfig__) != "undefined") {
            if (typeof(__userConfig__.__uface) != "undefined" && typeof(__userConfig__.__unick) != "undefined") {
                ad.push(__userConfig__.__uface ? __userConfig__.__uface: O.basePath + O.headimgsrc);
                ad.push(__userConfig__.__unick ? __userConfig__.__unick: "新浪用户")
            } else {
                ad.push(O.basePath + O.headimgsrc);
                ad.push("新浪用户")
            }
        } else {
            ad.push(O.basePath + O.headimgsrc);
            ad.push("新浪用户")
        }
        ac.push("<section>");
        ac.push('<div class="shareBg" id="' + w.findId.sharefloat + '">');
        ac.push('<div class="sharebox">');
        ac.push('<div class="float_cross fTitle" id="' + w.findId.floatCross + '" data-sudaclick="public_share_close"></div>');
        ac.push('<div class="shareTitle fTitle" id="' + w.findId.sharetitle + '">分享至微博</div>');
        ac.push('<div class="shareZone">');
        ac.push('<div class="platforms_big ' + w.findClass.platforms_big + '">');
        ac.push("<ul>");
        ac.push("<li>");
        ac.push('<span class="' + w.findClass.shareIcon + ' splat_ico sina_big" data-platform="' + J.sweibo[0] + '" data-sudaclick="public_sinaweibo"></span>');
        ac.push("<p>" + J.sweibo[1] + "</p>");
        ac.push("</li>");
        ac.push("<li>");
        ac.push('<span class="' + w.findClass.shareIcon + ' splat_ico friend_big" data-platform="' + J.friend[0] + '" data-sudaclick="public_wechatfriends"></span>');
        ac.push("<p>" + J.friend[1] + "</p>");
        ac.push("</li>");
        ac.push("<li>");
        ac.push('<span class="' + w.findClass.shareIcon + ' splat_ico fcircle_big" data-platform="' + J.fsircle[0] + '" data-sudaclick="public_wechattimeline"></span>');
        ac.push("<p>" + J.fsircle[1] + "</p>");
        ac.push("</li>");
        ac.push("</ul>");
        ac.push("</div>");
        ac.push('<div class="sinaShareContent ' + w.findClass.sinaShareContent + '">');
        ac.push('<div class="sinaInfo" id="' + w.findId.userInfo + '">');
        ac.push('<span class="user_img" id="' + w.findId.userImg + '">');
        ac.push('<img src="' + ad[0] + '"  style="width:100%;height:100%;"/>‘');
        ac.push("</span>");
        ac.push('<span class="user_name" id="' + w.findId.userName + '">' + ad[1] + "</span>");
        ac.push("</div>");
        ac.push('<div class="icontent ' + w.findClass.shareContentZone + '">');
        ac.push('<textarea class="ishare_content" id="' + w.findId.shareContentid + '">' + (readConfig.share.content ? readConfig.share.content: readConfig.share.shorttitle) + "</textarea>");
        ac.push('<span class="ishare_img">');
        ac.push('<img class="shareimg_style" src="' + (__docConfig.__mainPic ? __docConfig.__mainPic: O.shareimgsrc) + '" id="' + w.findId.shareImg + '" style="width:32px;height:32px"/>');
        ac.push("</span>");
        ac.push('<span class="ishare_num"><span class="  ' + ae[0] + '" id="' + w.findId.sharecnum + '">' + ae[1] + "</span>字</span>");
        ac.push("</div>");
        ac.push('<button class="isubmit ' + w.findClass.submitBtn + '" data-sudaclick="public_sinashare_submit">立即分享</button>');
        ac.push("</div>");
        ac.push("</div>");
        ac.push("</div>");
        ac.push("</div>");
        ac.push("</section>");
        $("body").append(ac.join(""));
        Y();
        return
    }
    function Y() {
        q();
        z();
        A(true);
        p();
        $(".shareBg").css("height", (r + 50) + "px")
    }
    function X() {
        if (document.all) {
            return window.event
        }
        func = X.caller;
        while (func != null) {
            var ac = func.arguments[0];
            if (ac) {
                if ((ac.constructor == Event || ac.constructor == MouseEvent) || (typeof(ac) == "object" && ac.preventDefault && ac.stopPropagation)) {
                    return ac
                }
            }
            func = func.caller
        }
        return null
    }
    this.wantShare = function(ac) {
        if (ac) {
            W()
        }
        if ($(".shareBg").length <= 0) {
            K()
        }
        aa();
        if ((isqqBrowser > bLevel.qq.lower || isucBrowser) && !isWeixin) {
            n(Z.platlist)
        } else {
            D()
        }
    };
    function q() {
        $("." + w.findClass.shareIcon).on("click",
        function() {})
    }
    function b() {
        window.addEventListener("click",
        function(ae) {
            var ag = ae.target || X().target,
            af = W($(ag));
            if (($(ag).hasClass(w.findClass.shareBtn) || $(ag).parents(".j_share_btn").length > 0 || $(ag).parents("." + w.findClass.shareBtn).length > 0) && window.ishare) {
                L(ae);
                j.wantShare()
            } else {
                if ($(ag).hasClass(w.findClass.shareIcon)) {
                    if ($(".shareBg").length <= 0) {
                        K()
                    }
                    aa();
                    if (af._platform == J.sweibo[0]) {
                        D()
                    } else {
                        if (isucBrowser) {
                            $("#j_comment_nav").hide();
                            setTimeout(function() {
                                k(af._obj, af._title, af._content, localhref, af._platform)
                            },
                            300);
                            setTimeout(function() {
                                $("#j_comment_nav").show()
                            },
                            600)
                        } else {
                            k(af._obj, af._title, af._content, localhref, af._platform)
                        }
                    }
                }
            }
            var ad = $("#ST_outLogin_mask"),
            ac = $("#j_sharebox");
            if (ad.length > 0 && ac.length > 0 && ac.css("display") != "none") {
                if (ad.css("display") != "none") {
                    Q(true)
                } else {
                    if (ad.css("display") == "none") {
                        Q(false)
                    }
                }
            }
        })
    }
    function Q(ac) {
        if (ac) {
            $("#j_sharecross").hide()
        } else {
            $("#j_sharecross").show()
        }
    }
    function W(ac) {
        var ad = {
            _obj: w.findId.spicid,
            _title: readConfig.share.shorttitle ? readConfig.share.shorttitle: $("title").html(),
            _content: readConfig.share.content ? readConfig.share.content: $("title").html(),
            _url: _shareDocUrl ? _shareDocUrl: __docConfig.__docUrl,
            _platform: ac ? ac.data("platform") : ""
        };
        N.iTitle = ad._title;
        N.iContent = ad._content;
        N.iImgsrc = __docConfig.__mainPic ? __docConfig.__mainPic: ($("#" + ad._obj).attr("src") ? $("#" + ad._obj).attr("src") : O.shareimgsrc);
        N.iUrl = ad._url;
        N.iBackurl = ad._url;
        N.isdoc = readConfig.share.isdoc ? readConfig.share.isdoc: 0;
        return ad
    }
    function D() {
        var ac = O.contentMax - N.iContent.length;
        $("#" + w.findId.shareContentid).text(N.iContent);
        $("#" + w.findId.sharecnum).html(ac);
        if (ac < 0) {
            $("#" + w.findId.sharecnum).addClass("notice");
            $("." + w.findClass.submitBtn).addClass(w.findClass.forbid)
        } else {
            $("#" + w.findId.sharecnum).removeClass("notice");
            $("." + w.findClass.submitBtn).removeClass(w.findClass.forbid)
        }
        $("#" + w.findId.shareImg).attr("src", N.iImgsrc);
        n(Z.share)
    }
    function z() {
        $("#" + w.findId.floatCross).on("click ",
        function() {
            n(Z.fade)
        });
        return
    }
    var R = "",
    r = document.documentElement.clientHeight;
    function A(ai) {
        var aj = $("." + w.findClass.sinaShareContent),
        ad = $("." + w.findClass.shareContentZone),
        ae = $("#" + w.findId.shareContentid),
        af = $("." + w.findClass.sinaInfo),
        ah = $("#" + w.findId.sharefloat),
        ag = $("#" + w.findId.sharecnum),
        ak = $("." + w.findClass.submitBtn);
        var ac = function() {
            if (aj.css("display") == "block") {
                var am = document.getElementById(w.findId.shareContentid).value,
                al = O.contentMax - am.length;
                ag.html(al);
                if (al < 0 || al == O.contentMax) {
                    ag.addClass("notice");
                    ak.addClass(w.findClass.forbid)
                } else {
                    ag.removeClass("notice");
                    ak.removeClass(w.findClass.forbid)
                }
                N.iContent = am
            }
        };
        if (!ai) {
            ad.css({
                height: "140px"
            });
            ae.attr("rows", O.contentRows[1])
        } else {
            $("#" + w.findId.shareContentid).on("click tap",
            function() {
                var al = ae.html();
                aa();
                ae.focus()
            }).on("keyup", ac).focus(function() {
                ad.css({
                    height: "85px"
                });
                $(this).attr("rows", O.contentRows[0]);
                $(".sharebox").css({
                    "margin-top": "40px"
                });
                $(".shareBg").css("height", (r + 50) + "px")
            }).blur(function() {
                $(this).attr("rows", O.contentRows[1]);
                $(".sharebox").css({
                    "margin-top": "10px"
                });
                $(".shareBg").css("height", (r + 10) + "px")
            });
            document.addEventListener("touchend", ac, false)
        }
        return
    }
    function p() {
        $("." + w.findClass.submitBtn).each(function() {
            $(this).on("click",
            function() {
                aa();
                if (!$(this).hasClass(w.findClass.forbid)) {
                    P()
                }
            })
        });
        return
    }
    var C = function(ac) {
        ac.preventDefault()
    };
    function x(ac) {
        var ad = document.body;
        if (ac) {
            $(document.body).css({
                overflow: "hidden",
                position: "absolute",
                top: "0px"
            })
        } else {
            $(document.body).css({
                overflow: "auto",
                position: "relative"
            })
        }
        return
    }
    var M = document.body.scrollTop,
    H = document.getElementsByName("viewport")[0],
    m = {
        hide: "width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no, minimal-ui",
        show: "width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no"
    },
    d = false;
    function n(ad, ae, ac) {
        ad = ad ? ad: Z.login;
        switch (ad) {
        case Z.login:
            I(ae, ac);
            break;
        case Z.platlist:
            if (!d) {
                M = document.body.scrollTop
            }
            H.content = m.hide;
            setTimeout(function() {
                window.scrollTo(0, 1)
            },
            200);
            d = true;
            h(true);
            o(w.findId.sharefloat, true);
            B(w.findId.floatCross, true);
            B(w.findId.sharetitle, false);
            S("." + w.findClass.platforms_big, true, Z.platlist);
            S("." + w.findClass.sinaShareContent, false, Z.share);
            break;
        case Z.share:
            if (__userConfig__.__isLogin) {
                if (!d) {
                    M = document.body.scrollTop
                }
                H.content = m.hide;
                setTimeout(function() {
                    window.scrollTo(0, 1)
                },
                200);
                d = true;
                h(true);
                o(w.findId.sharefloat, true);
                B(w.findId.floatCross, true);
                B(w.findId.sharetitle, true);
                U();
                if ($("#j_user_img").find("img").attr("src") == window.location.href || $("#j_user_img").find("img").attr("src") == "") {
                    i()
                }
                S("." + w.findClass.platforms_big, false, Z.platlist);
                S("." + w.findClass.sinaShareContent, true, Z.share)
            } else {
                f(__userConfig__.__isLogin, n, Z.share)
            }
            break;
        case Z.fade:
            H.content = m.show;
            h(false);
            o(w.findId.sharefloat, false);
            B(w.findId.floatCross, true);
            S("." + w.findClass.platforms_big, false, Z.platlist);
            S("." + w.findClass.sinaShareContent, false, Z.share);
            A(false);
            E($("." + w.findClass.addFavor), false);
            if (d) {
                document.body.scrollTop = M
            }
            d = false;
            break;
        default:
            break
        }
        return
    }
    function f(ac, af, ad, ae) {
        if (!__userConfig__.__isLogin) {
            a.login(ac, af, ad, ae)
        }
    }
    function L(ac) {
        if (ac && ac.preventDefault) {
            ac.preventDefault()
        } else {
            window.event.returnValue = false
        }
        return false
    }
    function h(ad) {
        var ae = $(document.body),
        ac = ae.children();
        for (var af = 0; af < ac.length; af++) {
            if (ac[af].tagName != "SCRIPT" && ac[af].tagName != "NOSCRIPT" && $(ac[af]).find(".shareBg").length <= 0) {
                if (ad && $(ac[af]).css("display") != "none") {
                    $(ac[af]).data("show", "show");
                    $(ac[af]).hide()
                } else {
                    if (!ad) {
                        if ($(ac[af]).data("show") == "show" && $(ac[af]).css("display") == "none") {
                            $(ac[af]).show()
                        } else {
                            $(ac[af]).data("show", "")
                        }
                    }
                }
            }
        }
    }
    function U() {
        $("#" + w.findId.userImg).find("img").attr("src", __userConfig__.__uface);
        $("#" + w.findId.userName).html(__userConfig__.__unick)
    }
    function S(ai, ah, ad) {
        var aj = $(ai),
        ae = (ad == Z.platlist) ? aj.find("li") : aj,
        ac = ah ? 1 : 0,
        af = ah ? O.animate[0] : "",
        ag = ah ? "block": "none";
        if (ah) {
            aj.css({
                opacity: 0
            });
            setTimeout(function() {
                aj.css({
                    opacity: ac
                })
            },
            250);
            ae.css({
                "-webkit-animation-name": af,
                opacity: ac,
                display: ag
            });
            if (ae != aj) {
                aj.css({
                    display: ag
                })
            }
        } else {
            ae.css({
                "-webkit-animation-name": af,
                opacity: ac,
                display: ag
            });
            aj.css({
                opacity: ac,
                display: ag
            })
        }
        return
    }
    function o(af, ac) {
        var ad = $("#" + af),
        ae = ad.css("display");
        if (ae == "none" && ac) {
            ad.show(3000)
        } else {
            if (ae != "none" && !ac) {
                ad.hide("fast")
            }
        }
        return
    }
    function B(ad, ac) {
        if (!ac) {
            $("#" + ad).hide()
        } else {
            $("#" + ad).show()
        }
        return
    }
    function I(ad, ac) {
        o(w.findId.sharefloat, false);
        if (typeof(ad) != "undefined" && typeof(ac) != "undefined") {
            f(__userConfig__.__isLogin, ad, ac)
        } else {
            if (typeof(ad) != "undefined") {
                f(__userConfig__.__isLogin, ad)
            } else {
                f(__userConfig__.__isLogin)
            }
        }
    }
    function i() {
        var ac = O.userInfoUrl + "userCallback";
        s(ac);
        return
    }
    window.userCallback = function(ac) {
        __userConfig__.__uface = ac.result.data.userface;
        __userConfig__.__unick = ac.result.data.uname;
        $("#" + w.findId.userImg).find("img").attr("src", __userConfig__.__uface);
        $("#" + w.findId.userName).html(__userConfig__.__unick);
        return
    };
    function y(ac) {
        var ad = {
            name: ac,
            type: "",
            title: "",
            index: "",
            href: ""
        };
        if (typeof(window.suds_count) == "function" || window.suds_count) {
            window.suds_count && window.suds_count(ad)
        }
    }
    function l() {
        $("head").append('<link rel="stylesheet" type="text/css" href="' + O.cssPath + '"></link>');
        e();
        return
    }
    function c() {
        if (checkLogin()) {
            getUserInfo(function(ac) {
                __userConfig__.__isLogin = true;
                __userConfig__.__uface = ac.userface;
                __userConfig__.__unick = ac.uname;
                __userConfig__.__uid = ac.uid
            })
        }
    }
    this.init = function() {
        l();
        setTimeout(function() {
            c();
            q();
            b();
            V();
            T()
        },
        2200);
        return
    };
    return
}
function isloadqqApi() {
    var c = new MyShareClass();
    if (isqqBrowser) {
        var b = (version.qq < 5.4) ? qApiSrc.lower: qApiSrc.higher,
        d = document.createElement("script"),
        a = document.getElementsByTagName("body")[0];
        d.onload = function() {
            c.init()
        };
        d.setAttribute("src", b);
        a.appendChild(d)
    } else {
        c.init()
    }
    return
}
function getPlantform() {
    ua = navigator.userAgent;
    if ((ua.indexOf("iPhone") > -1 || ua.indexOf("iPod") > -1)) {
        return "iPhone"
    }
    return "Android"
}
function is_weixin() {
    var a = UA.toLowerCase();
    if (a.match(/MicroMessenger/i) == "micromessenger") {
        return true
    } else {
        return false
    }
}
function getVersion(c) {
    var a = c.split("."),
    b = parseFloat(a[0] + "." + a[1]);
    return b
}
function init() {
    platform_os = getPlantform();
    version.qq = isqqBrowser ? getVersion(UA.split("MQQBrowser/")[1]) : 0;
    version.uc = isucBrowser ? getVersion(UA.split("UCBrowser/")[1]) : 0;
    isWeixin = is_weixin();
    if ((isqqBrowser && version.qq < 5.4 && platform_os == "iPhone") || (isqqBrowser && version.qq < 5.3 && platform_os == "Android")) {
        isqqBrowser = bLevel.qq.forbid
    } else {
        if (isqqBrowser && version.qq < 5.4 && platform_os == "Android") {
            isqqBrowser = bLevel.qq.lower
        } else {
            if (isucBrowser && ((version.uc < 10.2 && platform_os == "iPhone") || (version.uc < 9.7 && platform_os == "Android"))) {
                isucBrowser = bLevel.uc.forbid
            }
        }
    }
    isloadqqApi();
    return
}
setTimeout(function() {
    init()
},
300); (function() {
    var j = 0;
    var s = "";
    var d = 8;
    window.hex_md5 = function(w) {
        return k(g(l(w), w.length * d))
    };
    function h(w) {
        return p(g(l(w), w.length * d))
    }
    function i(w) {
        return t(g(l(w), w.length * d))
    }
    function q(w, x) {
        return k(m(w, x))
    }
    function f(w, x) {
        return p(m(w, x))
    }
    function u(w, x) {
        return t(m(w, x))
    }
    function v() {
        return hex_md5("abc") == "900150983cd24fb0d6963f7d28e17f72"
    }
    function g(H, C) {
        H[C >> 5] |= 128 << ((C) % 32);
        H[(((C + 64) >>> 9) << 4) + 14] = C;
        var G = 1732584193;
        var F = -271733879;
        var E = -1732584194;
        var D = 271733878;
        for (var z = 0; z < H.length; z += 16) {
            var B = G;
            var A = F;
            var y = E;
            var w = D;
            G = b(G, F, E, D, H[z + 0], 7, -680876936);
            D = b(D, G, F, E, H[z + 1], 12, -389564586);
            E = b(E, D, G, F, H[z + 2], 17, 606105819);
            F = b(F, E, D, G, H[z + 3], 22, -1044525330);
            G = b(G, F, E, D, H[z + 4], 7, -176418897);
            D = b(D, G, F, E, H[z + 5], 12, 1200080426);
            E = b(E, D, G, F, H[z + 6], 17, -1473231341);
            F = b(F, E, D, G, H[z + 7], 22, -45705983);
            G = b(G, F, E, D, H[z + 8], 7, 1770035416);
            D = b(D, G, F, E, H[z + 9], 12, -1958414417);
            E = b(E, D, G, F, H[z + 10], 17, -42063);
            F = b(F, E, D, G, H[z + 11], 22, -1990404162);
            G = b(G, F, E, D, H[z + 12], 7, 1804603682);
            D = b(D, G, F, E, H[z + 13], 12, -40341101);
            E = b(E, D, G, F, H[z + 14], 17, -1502002290);
            F = b(F, E, D, G, H[z + 15], 22, 1236535329);
            G = e(G, F, E, D, H[z + 1], 5, -165796510);
            D = e(D, G, F, E, H[z + 6], 9, -1069501632);
            E = e(E, D, G, F, H[z + 11], 14, 643717713);
            F = e(F, E, D, G, H[z + 0], 20, -373897302);
            G = e(G, F, E, D, H[z + 5], 5, -701558691);
            D = e(D, G, F, E, H[z + 10], 9, 38016083);
            E = e(E, D, G, F, H[z + 15], 14, -660478335);
            F = e(F, E, D, G, H[z + 4], 20, -405537848);
            G = e(G, F, E, D, H[z + 9], 5, 568446438);
            D = e(D, G, F, E, H[z + 14], 9, -1019803690);
            E = e(E, D, G, F, H[z + 3], 14, -187363961);
            F = e(F, E, D, G, H[z + 8], 20, 1163531501);
            G = e(G, F, E, D, H[z + 13], 5, -1444681467);
            D = e(D, G, F, E, H[z + 2], 9, -51403784);
            E = e(E, D, G, F, H[z + 7], 14, 1735328473);
            F = e(F, E, D, G, H[z + 12], 20, -1926607734);
            G = n(G, F, E, D, H[z + 5], 4, -378558);
            D = n(D, G, F, E, H[z + 8], 11, -2022574463);
            E = n(E, D, G, F, H[z + 11], 16, 1839030562);
            F = n(F, E, D, G, H[z + 14], 23, -35309556);
            G = n(G, F, E, D, H[z + 1], 4, -1530992060);
            D = n(D, G, F, E, H[z + 4], 11, 1272893353);
            E = n(E, D, G, F, H[z + 7], 16, -155497632);
            F = n(F, E, D, G, H[z + 10], 23, -1094730640);
            G = n(G, F, E, D, H[z + 13], 4, 681279174);
            D = n(D, G, F, E, H[z + 0], 11, -358537222);
            E = n(E, D, G, F, H[z + 3], 16, -722521979);
            F = n(F, E, D, G, H[z + 6], 23, 76029189);
            G = n(G, F, E, D, H[z + 9], 4, -640364487);
            D = n(D, G, F, E, H[z + 12], 11, -421815835);
            E = n(E, D, G, F, H[z + 15], 16, 530742520);
            F = n(F, E, D, G, H[z + 2], 23, -995338651);
            G = a(G, F, E, D, H[z + 0], 6, -198630844);
            D = a(D, G, F, E, H[z + 7], 10, 1126891415);
            E = a(E, D, G, F, H[z + 14], 15, -1416354905);
            F = a(F, E, D, G, H[z + 5], 21, -57434055);
            G = a(G, F, E, D, H[z + 12], 6, 1700485571);
            D = a(D, G, F, E, H[z + 3], 10, -1894986606);
            E = a(E, D, G, F, H[z + 10], 15, -1051523);
            F = a(F, E, D, G, H[z + 1], 21, -2054922799);
            G = a(G, F, E, D, H[z + 8], 6, 1873313359);
            D = a(D, G, F, E, H[z + 15], 10, -30611744);
            E = a(E, D, G, F, H[z + 6], 15, -1560198380);
            F = a(F, E, D, G, H[z + 13], 21, 1309151649);
            G = a(G, F, E, D, H[z + 4], 6, -145523070);
            D = a(D, G, F, E, H[z + 11], 10, -1120210379);
            E = a(E, D, G, F, H[z + 2], 15, 718787259);
            F = a(F, E, D, G, H[z + 9], 21, -343485551);
            G = o(G, B);
            F = o(F, A);
            E = o(E, y);
            D = o(D, w)
        }
        return Array(G, F, E, D)
    }
    function c(C, z, y, w, B, A) {
        return o(r(o(o(z, C), o(w, A)), B), y)
    }
    function b(z, y, D, C, w, B, A) {
        return c((y & D) | ((~y) & C), z, y, w, B, A)
    }
    function e(z, y, D, C, w, B, A) {
        return c((y & C) | (D & (~C)), z, y, w, B, A)
    }
    function n(z, y, D, C, w, B, A) {
        return c(y ^ D ^ C, z, y, w, B, A)
    }
    function a(z, y, D, C, w, B, A) {
        return c(D ^ (y | (~C)), z, y, w, B, A)
    }
    function m(y, B) {
        var A = l(y);
        if (A.length > 16) {
            A = g(A, y.length * d)
        }
        var w = Array(16),
        z = Array(16);
        for (var x = 0; x < 16; x++) {
            w[x] = A[x] ^ 909522486;
            z[x] = A[x] ^ 1549556828
        }
        var C = g(w.concat(l(B)), 512 + B.length * d);
        return g(z.concat(C), 512 + 128)
    }
    function o(w, B) {
        var A = (w & 65535) + (B & 65535);
        var z = (w >> 16) + (B >> 16) + (A >> 16);
        return (z << 16) | (A & 65535)
    }
    function r(w, x) {
        return (w << x) | (w >>> (32 - x))
    }
    function l(z) {
        var y = Array();
        var w = (1 << d) - 1;
        for (var x = 0; x < z.length * d; x += d) {
            y[x >> 5] |= (z.charCodeAt(x / d) & w) << (x % 32)
        }
        return y
    }
    function t(y) {
        var z = "";
        var w = (1 << d) - 1;
        for (var x = 0; x < y.length * 32; x += d) {
            z += String.fromCharCode((y[x >> 5] >>> (x % 32)) & w)
        }
        return z
    }
    function k(y) {
        var x = j ? "0123456789ABCDEF": "0123456789abcdef";
        var z = "";
        for (var w = 0; w < y.length * 4; w++) {
            z += x.charAt((y[w >> 2] >> ((w % 4) * 8 + 4)) & 15) + x.charAt((y[w >> 2] >> ((w % 4) * 8)) & 15)
        }
        return z
    }
    function p(z) {
        var y = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";
        var B = "";
        for (var x = 0; x < z.length * 4; x += 3) {
            var A = (((z[x >> 2] >> 8 * (x % 4)) & 255) << 16) | (((z[x + 1 >> 2] >> 8 * ((x + 1) % 4)) & 255) << 8) | ((z[x + 2 >> 2] >> 8 * ((x + 2) % 4)) & 255);
            for (var w = 0; w < 4; w++) {
                if (x * 8 + w * 6 > z.length * 32) {
                    B += s
                } else {
                    B += y.charAt((A >> 6 * (3 - w)) & 63)
                }
            }
        }
        return B
    }
})();